<div class="api-usage-info">

	@if (isLoadingUsage) {
		<div class="loading-usage">
			{{ 'LOADING_USAGE' | translate }}...
		</div>
	}

	<!-- DeepL API Usage Information -->
	@if (selectedApi === 'deepl-free') {

		@if (isUpdatingUsage) {

			@if (countdownValue > 0) {
				<div class="updating-usage">
					{{ 'USAGE_UPDATE_NOTICE' | translate }}: {{ countdownValue }}s
					<div class="countdown-bar">
						<div [style.width.%]="countdownProgress" class="countdown-progress"></div>
					</div>
				</div>
			}

			@if (countdownValue === 0 && retryCount > 0) {
				<div class="updating-usage">
					{{ 'CHECKING_USAGE_UPDATE' | translate }}: {{ retryCount }}/{{ MAX_RETRY_ATTEMPTS }}
					<div class="countdown-bar">
						<div [style.width.%]="(retryCount / MAX_RETRY_ATTEMPTS) * 100" class="countdown-progress"></div>
					</div>
				</div>
			}

		}

		@if (!isLoadingUsage && !isUpdatingUsage && !usageError) {
			<div class="usage-stats">
				<div class="usage-header">{{ 'DEEPL_API_USAGE' | translate }}</div>
				<div class="usage-details">
					<span>{{ 'CURRENT_USAGE' | translate }}: {{ characterCount | number }} / {{ characterLimit | number }}</span>
					<div class="usage-bar">
						<div [style.width.%]="(characterCount / characterLimit) * 100" class="usage-progress"></div>
					</div>
				</div>
			</div>
		}

	}

	<!-- Google Translate API Usage Information -->
	@if (selectedApi === 'google-free') {

		@if (!isLoadingUsage && !usageError) {
			<div class="usage-stats">
				<div class="usage-header">{{ 'GOOGLE_API_USAGE' | translate }}</div>
				<div class="usage-details">

					<!-- Monthly limit -->
					<div class="limit-section">
						<span class="limit-label">{{ 'MONTHLY_LIMIT' | translate }}:</span>
						<span>{{ characterCount | number }} / {{ characterLimit | number }}</span>
						<div class="usage-bar">
							<div [style.width.%]="(characterCount / characterLimit) * 100" class="usage-progress"></div>
						</div>
					</div>

					<!-- Weekly limit -->
					<div class="limit-section">
						<span class="limit-label">{{ 'WEEKLY_LIMIT' | translate }}:</span>
						<span>{{ characterCount | number }} / {{ weeklyLimit | number }}</span>
						<div class="usage-bar">
							<div [style.width.%]="(characterCount / weeklyLimit) * 100" class="usage-progress"></div>
						</div>
					</div>

					<!-- Daily limit -->
					<div class="limit-section">
						<span class="limit-label">{{ 'DAILY_LIMIT' | translate }}:</span>
						<span>{{ characterCount | number }} / {{ dailyLimit | number }}</span>
						<div class="usage-bar">
							<div [style.width.%]="(characterCount / dailyLimit) * 100" class="usage-progress"></div>
						</div>
					</div>

					<!-- Maximum characters per file -->
					<div class="limit-section">
						<span class="limit-label">{{ 'MAX_CHARS_PER_FILE' | translate }}:</span>
						<span>{{ fileCharLimit | number }} {{ 'CHARACTERS' | translate }}</span>
					</div>

				</div>
				<div class="usage-note">{{ 'GOOGLE_USAGE_NOTE' | translate }}</div>
			</div>
		}

	}

	@if (usageError) {
		<div class="usage-error">
			{{ usageError }}
		</div>
	}

</div>
