@if (files?.length) {
	<div class="folder-translation">
		<div class="controls">
			<button type="button" (click)="preScanFolder()" [disabled]="isScanning || isTranslating">
				{{ 'SCAN_FOLDER' | translate }}
			</button>
			<button type="button" (click)="translateFolder()" [disabled]="!scanDone || isTranslating || isScanning">
				{{ 'TRANSLATE_FOLDER' | translate }}
			</button>
		</div>

		@if (isScanning || isTranslating) {
			<div class="progress">
				<div class="bar" [style.width.%]="progress"></div>
				<div class="label">
					{{ isScanning ? ('SCANNING' | translate) : ('TRANSLATING' | translate) }} {{progress}}%
				</div>
			</div>
		}

		@if (scanDone) {
			<div class="summary">
				<div>{{ 'FILES_FOUND' | translate }}: {{ fileMetas.length }}</div>
			</div>

			<table class="files">
				<thead>
				<tr>
					<th>{{ 'FILE' | translate }}</th>
					<th>{{ 'CHARS' | translate }}</th>
					<th>{{ 'STATUS' | translate }}</th>
				</tr>
				</thead>
				<tbody>
					@for (m of fileMetas | slice:0:200; track $index) {
						<tr>
							<td>{{ m.relativePath }}</td>
							<td>{{ m.charCount }}</td>
							<td>{{ m.status }}</td>
						</tr>
					}
				</tbody>
			</table>
		}
	</div>
}
